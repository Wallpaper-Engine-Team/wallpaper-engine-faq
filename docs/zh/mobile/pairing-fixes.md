# 移动设备配对问题解决

::: tip
连接终究无法正常工作？
滚动到本页底部，查看通过 USB 或其他方法导入壁纸的手动备份解决方案。
:::

如果无法将移动设备与计算机配对，则防火墙或本地网络设置很可能出错了。 检查以下可能的问题来源：

* **确保您的手机和计算机连接到同一本地网络。**
  * 您的计算机不需要使用 Wi-Fi，即使通过网络电缆连接，计算机仍连接到同一网络。
* **确保防火墙没有阻止 Wallpaper Engine 与本地网络通信。**
  * Wallpaper Engine 使用网络端口 7884 (UDP) 和 7889 (TCP)，请确保防火墙并未阻止这些网络端口。
* **在计算机和移动设备上，禁用可能干扰设备间通信的任何类型的 VPN 或代理软件。**
* **确保网络路由器没有阻止您的设备相互通信。**
    * 确保您的路由器没有阻止设备之间的网络流量。
    * 在您的路由器设置中打开 **UPnP**（**"通用即插即用"**）。
* **仔细检查 Windows 上的 Wallpaper Engine 和移动设备是否均为最新版本且正常运行。**
* **如果您的计算机在 Android 应用程序中始终不可见：**可能是防火墙仅阻止用于发现您的设备的广播，您可以尝试直接输入计算机的 IP 地址。 导航到移动设备上的连接概览，单击右上角的三个点，然后选择**手动输入 IP**。 您现在可以尝试手动输入计算机的 IP 地址。 请确保 Wallpaper Engine 正在您的计算机上运行，而且您已打开**连接新设备**概览，否则无法进行连接。

### Windows 防火墙

特别是如果您的移动设备能找到但无法连接到您的计算机，则几乎可以肯定，该问题由计算机上的防火墙引起。 当您首次启动 Wallpaper Engine 时，它会提示您授予其访问您网络的权限。 如果您关闭此窗口或没有明确允许 **ui32.exe** 与您的网络通信，则 Windows 防火墙将阻止 Wallpaper Engine。 如下方屏幕截图所示，请确保允许 **ui32.exe** 进行通信：

![Windows 防火墙权限](/img/faq/windows_defender.png)

如果 Wallpaper Engine 检测到任何问题，它会自动建议防火墙修复程序。 该过程在某种程度上可靠，但在某些情况下，您可能仍然需要手动清除过去意外创建的任何阻止。

如果您没有授予 Wallpaper Engine 这些权限，Windows 防火墙将自动阻止 Wallpaper Engine。 打开 Windows 防火墙设置，然后单击**允许应用通过防火墙**。 搜索名为 **ui32** 的条目，将其删除或确保在*专用*和*公用*两列中均启用了复选标记，然后确认您的更改，重新启动 Wallpaper Engine。

务必查找 **ui32** 或 **Wallpaper Engine UI**，您可能会找到仅名为 **Wallpaper Engine** 的条目，但这些条目在此处无关紧要。

**请注意：**本节的内容专门针对内置 Windows 防火墙，如果您使用任何其他防病毒应用程序或防火墙，您需要确保它们没有阻止 Wallpaper Engine。

## 备用解决方案：手动导入壁纸文件 (.mpkg)

如果您无法修复计算机和移动设备之间的连接，您仍可手动将壁纸转移到移动设备上。 首先，在 Wallpaper Engine 中选择要导出的壁纸，然后右键单击并选择**发送到移动设备**，接下来单击**导出 .mpkg**。

<video width="100%" controls autoplay loop>
  <source src="/videos/mobile_export.mp4" type="video/mp4">
  您的浏览器不支持视频标签。
</video>

在 Wallpaper Engine 为壁纸创建 .mpkg 文件后，您可以通过 USB 将这些文件移动到移动设备上，或者将文件复制到 SD 卡上，进而转移到移动设备。 或者，您还可以使用移动设备上的任何文件共享服务，或通过消息服务乃至电子邮件（如果文件大小不成问题）将文件发送给自己。

文件转移到移动设备上以后，在移动设备上打开 Wallpaper Engine，然后使用**导入文件**功能，从放置文件的目录选择文件，直接将 .mpkg 文件导入该应用程序。

::: danger
请务必将 .mpkg 文件放入移动设备上的 **Downloads** 文件夹。 Android 在允许应用程序访问文件方面具有非常严格的限制。 如果找不到或打不开设备上的 .mpkg 文件，请尝试将文件放入其他目录，通常 **Downloads** 文件夹是最可靠的选择。
:::